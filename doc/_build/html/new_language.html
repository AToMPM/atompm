

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Creating a Modelling Language &mdash; AToMPM 0.6 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/mystyle.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="AToMPM 0.6 documentation" href="index.html" />
    <link rel="next" title="Using a Modelling Language" href="using_language.html" />
    <link rel="prev" title="Overview" href="overview.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="using_language.html" title="Using a Modelling Language"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Overview"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">AToMPM 0.6 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="creating-a-modelling-language">
<span id="id1"></span><h1>Creating a Modelling Language<a class="headerlink" href="#creating-a-modelling-language" title="Permalink to this headline">¶</a></h1>
<p>A new language needs two things: a definition its abstract syntax, and a definition of its concrete syntax. These are compiled to a formalism toolbar, which is used by the language user to create models (see <a class="reference internal" href="using_language.html#using-a-modelling-language"><span class="std std-ref">Using a Modelling Language</span></a>).</p>
<div class="section" id="initializing">
<h2>Initializing<a class="headerlink" href="#initializing" title="Permalink to this headline">¶</a></h2>
<p>To initialize a new formalism, press the <em>new formalism</em> (<a class="inline-image reference internal" href="_images/newFormalism.icon.png"><img alt="newFormalism.icon" class="inline-image" src="_images/newFormalism.icon.png" style="width: 16.0px; height: 15.5px;" /></a>) button of the <em>MainMenu</em> toolbar.</p>
<p>This will open a window which allows you to choose the name of your new language. In this case, we demonstrate using the <em>TrafficLight</em> language.</p>
<img alt="_images/new_formalism.png" src="_images/new_formalism.png" />
<p>Pressing the OK button creates the following file structure under the <em>/Formalisms/</em> user folder:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">TrafficLight</span><span class="o">/</span>
    <span class="n">TrafficLight</span><span class="o">.</span><span class="n">model</span>
    <span class="n">TrafficLight</span><span class="o">.</span><span class="n">metamodel</span>
    <span class="n">TrafficLight</span><span class="o">.</span><span class="n">defaultIcons</span><span class="o">.</span><span class="n">model</span>
    <span class="n">TrafficLight</span><span class="o">.</span><span class="n">defaultIcons</span><span class="o">.</span><span class="n">metamodel</span>
    <span class="n">OperationalSemantics</span><span class="o">/</span>
        <span class="n">T_OperationalSemantics</span><span class="o">.</span><span class="n">model</span>
    <span class="n">DenotationalSemantics</span><span class="o">/</span>
        <span class="n">T_DenotationalSemantics</span><span class="o">.</span><span class="n">model</span>
</pre></div>
</div>
<ul class="simple">
<li><strong>TrafficLight.model</strong> is the model of the language&#8217;s abstract syntax (see <a class="reference internal" href="#defining-abstract-syntax"><span class="std std-ref">Defining Abstract Syntax</span></a>)</li>
<li><strong>TrafficLight.metamodel</strong> is the compiled metamodel of the language&#8217;s abstract syntax</li>
<li><strong>TrafficLight.defaultIcons.model</strong> is the definition of the language&#8217;s concrete syntaxc (see <a class="reference internal" href="#defining-concrete-syntax"><span class="std std-ref">Defining Concrete Syntax</span></a>)</li>
<li><strong>TrafficLight.defaultIcons.metamodel</strong> is the compiled definition of the language&#8217;s concrete syntax (a formalism toolbar - see <a class="reference internal" href="overview.html#formalism-toolbars"><span class="std std-ref">Formalism Toolbars</span></a>)</li>
<li><strong>OperationalSemantics/T_OperationalSemantics.model</strong> is the definition of the language&#8217;s operational semantics (see <a class="reference internal" href="modelling_transformation.html#modelling-a-model-transformation"><span class="std std-ref">Modelling a Model Transformation</span></a>)</li>
<li><strong>DenotationalSemantics/T_DenotationalSemantics.model</strong> is the definition of the language&#8217;s operational semantics (see <a class="reference internal" href="modelling_transformation.html#modelling-a-model-transformation"><span class="std std-ref">Modelling a Model Transformation</span></a>)</li>
</ul>
<p>It then opens <strong>TrafficLight.model</strong> and <strong>TrafficLight.defaultIcons.model</strong> in new instances (tabs) of AToMPM. At the start, they are empty. Read the following sections to define your abstract syntax and concrete syntax.</p>
</div>
<div class="section" id="defining-abstract-syntax">
<span id="id2"></span><h2>Defining Abstract Syntax<a class="headerlink" href="#defining-abstract-syntax" title="Permalink to this headline">¶</a></h2>
<p>When first opening the model of your formalism&#8217;s abstract syntax (<strong>&lt;formalism-name&gt;.model</strong>), it is empty, with one formalism toolbar loaded: <img alt="SCDToolbar" class="inline-image" src="_images/SCDToolbar.png" /> (<em>/Formalisms/__LanguageSyntax__/SimpleClassDiagram/SimpleClassDiagram.umlIcons.metamodel</em>). <em>SimpleClassDiagram</em> is a <em>metamodelling</em> language and can be used to define the abstract syntax of a new language.</p>
<p>It defines the following concepts:</p>
<ul class="simple">
<li><strong>Class</strong> allows to model the structure of a concept in the language</li>
<li><strong>GlobalConstraint</strong> allows to model a constraint that needs to hold for each model conforming to this class diagram</li>
<li><strong>GlobalAction</strong> allows to model an action that is triggered on a specific trigger</li>
</ul>
<p>Classes can be connected by two connectors:</p>
<ul class="simple">
<li><strong>Association</strong>: allows to link instances of the source class with instances of the target class</li>
<li><strong>Inheritance</strong>: the source class inherits all attributes, actions, constraints, associations, and cardinalities (transitively) from the target class</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Many tools hide the definition of their metamodelling language(s), instead relying on a hardcoded core language. AToMPM, as much as possible, follows the philosophy of <em>modelling everything</em>. If you&#8217;re interested, you can inspect the definition of the abstract and concrete syntax of any language in AToMPM, including <em>SimpleClassDiagram</em>. Open <em>/Formalisms/__LanguageSyntax__/SimpleClassDiagram/SimpleClassDiagramMM.model</em> for the definition of <em>SimpleClassDiagram</em>&#8216;s abstract syntax, and <em>/Formalisms/__LanguageSyntax__/SimpleClassDiagram/SimpleClassDiagram.defaultIcons.model</em> for the definition of <em>SimpleClassDiagram</em>&#8216;s concrete syntax.</p>
</div>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>A language has requirements. In case of <em>TrafficLight</em>, the requirements are as follows:</p>
<ul class="simple">
<li>A model in the <em>TrafficLight</em> language consists of a number of states. Each state has a unique name (a string). Exactly one of the states is a start state. There is no explicit end state, but a traffic light will stay forever in a state without outgoing transitions.</li>
<li>States may be connected by zero or more transitions. There are two types of transitions: timed transitions and interrupt transitions. A timed transition is labelled with an integer number (milliseconds) time delay. An interrupt transition is labelled with the name of an interrupt (a string). There should be at most one timed transition going from a state. This is reasonable as our transitions do not have guards (as Statecharts do). If we allowed more than one timed transition, only the one with the lowest time delay would be used. All interrupt names on transitions going out of a single state must be distinct. If this were not the case, the behaviour (described in a later exercise) would be non-deterministic.</li>
<li>Associated with each state is a description of the visualization of the traffic light when it is in that state. The description specifies, for each of the three coloured lights (Red, Green, Yellow) in a traffic light, whether it is on or off. A state &#8220;red&#8221; for example may have the visualization {Red=on, Green=off, Yellow=off} associated with it.</li>
<li>Multiple states may refer to the same visualization.</li>
<li>AToMPM does not allow for real-time simulation, nor external input. This means the interrupt-producing environment in which the traffic light will operate needs to be modelled too. This is done by means of a time-ordered interrupt list. The interrupt list consists of a number of connected interrupt notices. The list is single-linked, so each element is linked only to the next element in the list. An interrupt notice (<em>i.e.</em>, each element of the list) has a non-negative integer absolute time (milliseconds) timestamp as well as the name of the interrupt (a string).</li>
<li>For simulation purposes only, a (singleton) global time entity holding a non-negative integer absolute time (milliseconds) value is needed. This value should be initialized to 0 and will only be updated (increased) by the simulator (operational semantics).</li>
<li>Also for simulation purposes, a current state will refer to the state the model is in at any given time.</li>
</ul>
<p>These requirements are translated to the class diagram model defining the language&#8217;s abstract syntax. The <em>TrafficLights</em> abstract syntax definition is shown below.</p>
<img alt="_images/trafficlights_as.png" src="_images/trafficlights_as.png" />
<p>In the next subsections, we go into detail what each element means.</p>
</div>
<div class="section" id="classes">
<span id="id3"></span><h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<p>A class represents a concept in the language that can be instantiated on the canvas, if it is non-abstract. Abstract classes cannot be instantiated. In the <em>TrafficLight</em> language, one class called <em>AbstractInterrupt</em> is abstract, and has two subclasses: an <em>Interrupt</em> and an <em>End</em> of the interrupt list. Because the <em>Interrupt</em> list has an association <em>Nex</em> with <em>AbstractInterrupt</em>, a linear list of interrupts modelling the environment can be modelled, that ends with an <em>End</em> instance, since that class has no incoming or outgoing associations.</p>
<p>A traffic light model consists of, besides an interrupt list, <em>State*s, which are associated with a *Visualization</em>. States can be connected by transitions, that define conditional transitions. Let us look at the definition of the <em>State</em> class (by middle-clicking on its icon, or selecting it and clicking <em>insert</em> or the <em>command</em> key):</p>
<img alt="_images/state.png" src="_images/state.png" />
<p>A class has six attributes:</p>
<ul class="simple">
<li>A (diagram-wide unique) <em>name</em> that identifies it.</li>
<li>A number of <a class="reference internal" href="#attributes"><span class="std std-ref">Attributes</span></a>.</li>
<li>A number of <a class="reference internal" href="#constraints"><span class="std std-ref">Constraints</span></a>.</li>
<li>A number of <a class="reference internal" href="#actions"><span class="std std-ref">Actions</span></a>.</li>
<li>A number of <a class="reference internal" href="#cardinalities"><span class="std std-ref">Cardinalities</span></a>.</li>
<li>A boolean indicating whether the class is abstract.</li>
</ul>
</div>
<div class="section" id="associations">
<span id="id4"></span><h3>Associations<a class="headerlink" href="#associations" title="Permalink to this headline">¶</a></h3>
<p>Associations connect classes. In models created in the language, they are instantiated as links between objects. Associations are the only way to refer from one object to another object (attributes can only be of primitive types!). There are two types of associations, which result in different behaviour when using the language:</p>
<ul class="simple">
<li><strong>Visual</strong> associations are instantiated by right-clicking on the source object, dragging acrsoss the canvas, and releasing on the target object. This results in a visual link between the two objects.</li>
<li><strong>Containment</strong> associations are instantiated by dragging the source object on top of the target object, and releasing. This will automatically instantiate the containment association.</li>
</ul>
<p>An <em>Association</em> in the abstract syntax definition is itself visual association. It is created by right-clicking a source class, and releasing on the target class. The definition of the <em>TimedTransition</em> association can be seen below:</p>
<img alt="_images/timed_transition.png" src="_images/timed_transition.png" />
<p>An association has six attributes:</p>
<ul class="simple">
<li>A (diagram-wide unique) <em>name</em> that identifies it.</li>
<li>A number of <a class="reference internal" href="#attributes"><span class="std std-ref">Attributes</span></a>.</li>
<li>A number of <a class="reference internal" href="#constraints"><span class="std std-ref">Constraints</span></a>.</li>
<li>A number of <a class="reference internal" href="#actions"><span class="std std-ref">Actions</span></a>.</li>
<li>A number of cardinalities, but these are unused, as AToMPM does not support hyperedges.</li>
<li>A linktype that specifies whether this is a visual or a containment relationship.</li>
</ul>
<p>If a user draws a link between two objects, and those object&#8217;s classes are connected by more than one association, the user is presented with an option screen. If the classes are only connected by one associtation, that association is instantiated. If no association exists between the classes, no link is created. For example, when linking two <em>State</em> instances, the user is presented with the following screen:</p>
<img alt="_images/association_option.png" src="_images/association_option.png" />
<p>... since in the metamodel, two associations connect the <em>State</em> class with itself.</p>
</div>
<div class="section" id="cardinalities">
<span id="id5"></span><h3>Cardinalities<a class="headerlink" href="#cardinalities" title="Permalink to this headline">¶</a></h3>
<p>Cardinalities are constraints on the number of links that can be instantiated in the models created in the language. Cardinalities are defined on the source and target classes of the association for which we want to constrain the amount of instances. A cardinality is a dictionary with the following keys:</p>
<ul class="simple">
<li><strong>dir</strong> is either <em>in</em> or <em>out</em>, depending on whether we want to constrain the amount of incoming or outgoing connections, respectively.</li>
<li><strong>type</strong> is the type (name of the association) of links we want to constrain.</li>
<li><strong>min</strong> is the minimum amount of incoming/outgoing links of the specified type (an integer 0 &lt;= n &lt; &#8220;inf&#8221;).</li>
<li><strong>max</strong> is the maximum amount of incoming/outgoing links of the specified type (an integer 0 &lt; n &lt;= &#8220;inf&#8221;).</li>
</ul>
</div>
<div class="section" id="attributes">
<span id="id6"></span><h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h3>
<p>A class or association can have attributes. These attributes are represented by a dictionary with three keys:</p>
<ul>
<li><p class="first"><strong>name</strong> specifies the (unique within the class) name of the attribute.</p>
</li>
<li><dl class="first docutils">
<dt><strong>type</strong> specifies the type of the attribute. Supported types:</dt>
<dd><ul class="first last simple">
<li><em>int</em>: an integer</li>
<li><em>float</em>: a floating-point number</li>
<li><em>string</em>: a string</li>
<li><em>boolean</em>: a boolean</li>
<li><em>code</em>: a block of code</li>
<li><em>file&lt;pattern&gt;</em>: a string which specifies the locatation of a file (such as a model). Attribute values have to match the specified pattern.</li>
<li><em>map&lt;[keys...],[base-types...]&gt;</em>: a dictionary with specified keys, and for each key, a value of the specified base-type.</li>
<li><em>list&lt;base-type&gt;</em>: a list of base-type values.</li>
<li><em>ENUM(options...)</em>: a choice of several options.</li>
<li><em>$ATTRIBUTE</em>: <em>map&lt;[name,type,default],[string,string,string]&gt;</em></li>
<li><em>$CARDINALITY</em>: <em>map&lt;[dir,type,min,max],[string,string,string,string]&gt;</em></li>
<li><em>$EVENT</em>: <em>ENUM(pre-connect,pre-create,pre-disconnect,pre-delete,pre-edit,post-connect,post-create,post-disconnect,post-delete,post-edit)</em></li>
<li><em>$EVENT_HANDLER</em>: <em>map&lt;[name,event,code],[string,$EVENT,code]&gt;</em></li>
<li><em>$ARG</em>: <em>map&lt;[name,type],[string,string]&gt;</em></li>
<li><em>$METHOD</em>: <em>map&lt;[name,args,returntype,body],[string,list&lt;$ARG&gt;,string,code]&gt;</em></li>
</ul>
</dd>
</dl>
</li>
<li><p class="first"><strong>default</strong> specifies the default value of the attribute.</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Default values need to evaluate to values that are of the specified type!</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When defining a map/ENUM, its keys/options are defined as a comma-separated list. Do NOT insert any whitespaces before or after the comma&#8217;s, as these will be seen as part of the key/option name.</p>
</div>
<p>Depending on the type, the editor presented to the user is different. For an int/float/string it is an input field, for code a text area, for a file the user is presented with a file browser, etc.</p>
</div>
<div class="section" id="inheritance">
<span id="id7"></span><h3>Inheritance<a class="headerlink" href="#inheritance" title="Permalink to this headline">¶</a></h3>
<p>Two classes can be linked by <a class="reference internal" href="#associations"><span class="std std-ref">Associations</span></a>, but also by an inheritance link. In the <em>TrafficLights</em> example, for example, <em>Interrupt</em> and <em>End</em> inherit from <em>AbstractInterrupt</em>. A subclass inherits <a class="reference internal" href="#attributes"><span class="std std-ref">Attributes</span></a>, <a class="reference internal" href="#actions"><span class="std std-ref">Actions</span></a>, <a class="reference internal" href="#constraints"><span class="std std-ref">Constraints</span></a>, and <a class="reference internal" href="#cardinalities"><span class="std std-ref">Cardinalities</span></a> from its superclass. If the subclass defines any item with the same name, it overwrites the definition found in the parent.</p>
</div>
<div class="section" id="constraints">
<span id="id8"></span><h3>Constraints<a class="headerlink" href="#constraints" title="Permalink to this headline">¶</a></h3>
<p>There are two types of constraints: global constraints (instantiated from the <em>SimpleClassDiagram</em> toolbar) and local constraints (in the definition of a class). They differ only in what they can &#8220;see&#8221;: a global constraint is defined over the whole model, while a local constraint is evaluated in the context of an object, and can only &#8220;see&#8221; the object&#8217;s structure and its neighbors.</p>
<p>A constraint is evaluated when an event triggers. An explanation of all triggers can be found under <a class="reference internal" href="#triggers"><span class="std std-ref">Triggers</span></a>.</p>
<p>A constraint needs to evaluate to a boolean value. The constraint code is written in Javascript. This means <strong>the last statement executed by the constraint needs to evaluate to a boolean value</strong>. For example, let&#8217;s model the constraint that only one instance of the <em>Time</em> class can be instantiated.</p>
<p>As a local constraint:</p>
<img alt="_images/local_constraint.png" src="_images/local_constraint.png" />
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Multi-line local constraints need to have each line end with &#8220;\&#8221;.</p>
</div>
<p>One disadvantage of this constraint is that the minimum number of instances (also 1) is not checked. A global constraint solves this:</p>
<img alt="_images/global_constraint.png" src="_images/global_constraint.png" />
<p>This constraint checks, when the user presses the <em>validate</em> button on the <em>MainMenu</em> toolbar, whether exactly one instance of the <em>Time</em> class is instantiated. For more information on which functions are available, see <a class="reference internal" href="#action-library"><span class="std std-ref">Action Library</span></a>.</p>
</div>
<div class="section" id="actions">
<span id="id9"></span><h3>Actions<a class="headerlink" href="#actions" title="Permalink to this headline">¶</a></h3>
<p>There are two types of actions: global actions (instantiated from the <em>SimpleClassDiagram</em> toolbar) and local actions (in the definition of a class). They differ only in what they can &#8220;see&#8221;: a global action is defined over the whole model, while a local action is evaluated in the context of an object, and can only &#8220;see&#8221; the object&#8217;s structure and its neighbors.</p>
<p>An action is evaluated when an event triggers. An explanation of all triggers can be found under <a class="reference internal" href="#triggers"><span class="std std-ref">Triggers</span></a>.</p>
<p>For example, let&#8217;s model an action that sets the <em>clock</em> attribute of a <em>Time</em> instance to 0 whenever a <em>Time</em> instance is created. Note that this is not really necessary, as the default value already makes sure the attribute is correctly initialized.</p>
<p>As a local action:</p>
<img alt="_images/local_action.png" src="_images/local_action.png" />
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Multi-line local actions need to have each line end with &#8220;\&#8221;.</p>
</div>
<p>As a global action:</p>
<img alt="_images/global_action.png" src="_images/global_action.png" />
<p>One major disadvantage of the global action is that the clock will be set to 0 every time an instance is created, regardless of its type.</p>
</div>
<div class="section" id="triggers">
<span id="id10"></span><h3>Triggers<a class="headerlink" href="#triggers" title="Permalink to this headline">¶</a></h3>
<p>The events that can trigger are:</p>
<ul class="simple">
<li><strong>pre-connect</strong>, which triggers just before two instances are connected</li>
<li><strong>pre-create</strong>, which triggers just before an instance is created</li>
<li><strong>pre-disconnect</strong>, which triggers just before a link between two instances is deleted</li>
<li><strong>pre-delete</strong>, which triggers just before an instance is deleted</li>
<li><strong>pre-edit</strong>, which triggers just before an instance is edited</li>
<li><strong>post-connect</strong>, which triggers just after two instances are connected</li>
<li><strong>post-create</strong>, which triggers just after an instance is created</li>
<li><strong>post-disconnect</strong>, which triggers just after a link between two instances is deleted</li>
<li><strong>post-delete</strong>, which triggers just after an instance is deleted</li>
<li><strong>post-edit</strong>, which triggers just after an instance is edited</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A constraint without a trigger is evaluated when the user presses the <em>verify</em> button on the <em>MainMenu</em> toolbar.</p>
</div>
</div>
<div class="section" id="action-library">
<span id="id11"></span><h3>Action Library<a class="headerlink" href="#action-library" title="Permalink to this headline">¶</a></h3>
<table border="1" class="table-with-borders docutils">
<colgroup>
<col width="22%" />
<col width="25%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">parameters</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>getAttr(_attr[, _id])</td>
<td><ul class="first last simple">
<li><em>_attr</em>: string</li>
<li><em>_id</em>: string</li>
</ul>
</td>
<td>Return the value of the given attribute from the given entity, specified
via its abstract syntax identifier. If no such attribute exists, the
current constraint, action, mapper, or parser is immediately interrupted
and an error is presented to the user.</td>
</tr>
<tr class="row-odd"><td>hasAttr(_attr[, _id])</td>
<td><ul class="first last simple">
<li><em>_attr</em>: string</li>
<li><em>_id</em>: string</li>
</ul>
</td>
<td>Returns <em>true</em> if the given entity, specified via its abstract syntax
identifier, has an attribute named <em>attr</em>, <em>false</em> otherwise.</td>
</tr>
<tr class="row-even"><td>getAttrNames(_id)</td>
<td><ul class="first last simple">
<li><em>_id</em>: string</li>
</ul>
</td>
<td>Return all attribute names of the given entity, specified via its abstract
syntax identifier.</td>
</tr>
<tr class="row-odd"><td>getAllNodes(_fulltypes)</td>
<td><ul class="first last simple">
<li><em>_fulltypes</em>: list&lt;string&gt;</li>
</ul>
</td>
<td>Return the abstract syntax identifiers of all entities whose types are
contained within the fulltypes array. If it is omitted, return the abstract
syntax identifiers of all entities. The notion of full types is best
explained by example: the full type of a SimpleClassDiagram.Class entity is
&#8220;/Formalisms/__LanguageSyntax__/SimpleClassDiagram/SimpleClassDiagram/Class&#8221;.</td>
</tr>
<tr class="row-even"><td>getNeighbors(_dir[, _type, _id])</td>
<td><ul class="first last simple">
<li><em>_dir</em>: string</li>
<li><em>_type</em>: string</li>
<li><em>_id</em>: string</li>
</ul>
</td>
<td>Return neighbours of the given entity, specified via its abstract syntax
identifier. The <em>_dir</em> parameter can take on three values: &#8220;in&#8221; implies that
only inbound neighbours should be returned, &#8220;out&#8221; implies that only outbound
neighbours should be returned, &#8220;*&#8221; implies that neighbours in either
direction should be returned. Finally, the <em>_type</em> parameter can be set to
indicate that only neighbours of the given full type should be re turned. The
notion of full types is best explained by example: the full type of a
SimpleClassDiagram.Class entity is
&#8220;/Formalisms/__LanguageSyntax__/SimpleClassDiagram/SimpleClassDiagram/Class&#8221;.
To match any type, use &#8220;*&#8221;.</td>
</tr>
<tr class="row-odd"><td>print(msg)</td>
<td><ul class="first last simple">
<li><em>msg</em>: string</li>
</ul>
</td>
<td>Print the given string to the console that launched the AToMPM back-end.</td>
</tr>
<tr class="row-even"><td>setAttr(_attr, _val[, _id])</td>
<td><ul class="first last simple">
<li><em>_attr</em>: string</li>
<li><em>_val</em>: any</li>
<li><em>_id</em>: string</li>
</ul>
</td>
<td>Update the given attribute of the given entity, specified via its abstract
syntax identifier, to the given value. Note that this function is only
available from within meta-modelling actions. Also, beware the fact that
calls to <em>setAttr()</em> are not treated like normal model updates (<em>i.e.</em>, they
do not trigger pre-editing constraints and post-editing actions).</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <em>getNeighbors</em> returns only DIRECT neighbors. For instances of classes, this means its neighbors are <em>links</em> (instances of associations), and not the instances of classes that the instance is connected with through these links. A link always has exactly one incoming and one outgoing neighbor.</p>
</div>
</div>
</div>
<div class="section" id="defining-concrete-syntax">
<span id="id12"></span><h2>Defining Concrete Syntax<a class="headerlink" href="#defining-concrete-syntax" title="Permalink to this headline">¶</a></h2>
<img alt="_images/cs_toolbar.png" src="_images/cs_toolbar.png" />
<p>The concrete syntax definition of a language is a model in the <em>/Formalisms/__LanguageSyntax__/ConcreteSyntax.defaultIcons.metamodel</em> language. It defines for each non-abstract class and association a visual icon.</p>
<p>There are two &#8220;main&#8221; classes: <strong>Icon</strong> and <strong>Link</strong>. The first is a container for visual elements that make up the visualization of a class instance. The second is a definition of the visualization of an association instance (an arrow). For example, this is the definition of the concrete syntax of the <em>TrafficLights</em> language:</p>
<img alt="_images/trafficlights_cs.png" src="_images/trafficlights_cs.png" />
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Naming is very important. The <em>typename</em> attribute of an icon needs to be <em>&lt;class-name&gt;*Icon, where *&lt;class-name&gt;</em> is the name of the class, and the <em>typename</em> attribute of a link needs to be <em>&lt;association-name&gt;*Link, where *&lt;association-name&gt;</em> is the name of the association.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For Icons, place its contents as close as possible to the top-left corner. This ensures that the icon is instantiated as close as possible to the mouse position.</p>
</div>
<p><em>Icon</em> and <em>Link</em> contents are modelled as instances of eight classes:</p>
<ol class="arabic">
<li><dl class="first docutils">
<dt><em>Rectangle</em></dt>
<dd><ul class="first last simple">
<li><em>width</em> defines the width (in pixels).</li>
<li><em>height</em> defines the width (in pixels).</li>
<li><em>cornerRadius</em> defines the amount of rounding of the corners (as a percentage).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><em>Text</em></dt>
<dd><ul class="first last simple">
<li><em>textContent</em> defines the text content of the text element.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><em>Circle</em></dt>
<dd><ul class="first last simple">
<li><em>r</em> defines the readius of the instantiated rectangle (in pixels).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><em>Ellips</em></dt>
<dd><ul class="first last simple">
<li><em>rx</em> defines the radius on the x-axis (in pixels).</li>
<li><em>ry</em> defines the radius on the y-axis (in pixels).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><em>Polygon</em></dt>
<dd><ul class="first last simple">
<li><em>r</em> defines the radius (in pixels).</li>
<li><em>sides</em> defines the amount of sides.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><em>Star</em></dt>
<dd><ul class="first last simple">
<li><em>r</em> defines the radius (in pixels).</li>
<li><em>rays</em> defines the amount of rays.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><em>Path</em></dt>
<dd><ul class="first last simple">
<li><em>segments</em> defines the segments of the path &#8211; this allows for arbitrary shapes using the <a class="reference external" href="https://www.w3.org/TR/SVG/paths.html">SVG Paths</a> syntax.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><em>Image</em></dt>
<dd><ul class="first last simple">
<li><em>src</em> specifies where the image can be found. This is a path relative to your user folder. It is recommended to put your images in your formalism folder (for example <a href="#id13"><span class="problematic" id="id14">*</span></a>/Formalisms/&lt;FormalismName&gt;/images/).</li>
<li><em>width</em> defines the width of the image (in pixels).</li>
<li><em>height</em> defines the width of the image (in pixels).</li>
</ul>
</dd>
</dl>
</li>
</ol>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Scaling your elements with the geometry controls does not affect the size of the instantiated elements! You need to change the <em>width</em>/<em>height</em>/<em>r</em>/<em>rx</em>/<em>ry</em> attributes (depending on the element).</p>
</div>
<div class="section" id="mappers-and-parsers">
<h3>Mappers and Parsers<a class="headerlink" href="#mappers-and-parsers" title="Permalink to this headline">¶</a></h3>
<p>All visual elements have a number of attributes that change its appearance. For example, a circle has a radius that can be changed to resize it. But, you might want to make the values of concrete syntax attributes depend on the values of abstract syntax attributes, and vice versa, make the values of abstract syntax attributes depend on the value of concrete syntax attributes.</p>
<p>For example, a class might have a &#8220;name&#8221; attribute. It makes sense to include a <em>Text</em> instance in the icon definition for that class, but normally, the text content is fixed. Mappers make it possible to map the content of the name on the content of the text visual element. Converesely, let&#8217;s say we want to access the position of an element in abstract syntax. Normally, the position attribute is only a concrete syntax attribute. Parsers make it possible to parse the content of the position attribute and change the abstract syntax attribute.</p>
<p>For the <em>TrafficLights</em> attribute, the icon of the <em>State</em> class consists of a circle and a text, which should display the name of the state. The definition of the text element is as follows:</p>
<img alt="_images/mapper_example.png" src="_images/mapper_example.png" />
<p>Conversely, if the content of the text is changed, it is parsed as the name of the <em>State</em> instance.</p>
<p>More complex mappers are possible. The visualization of a traffic light consists of an oval with three circles: the top is the red light, the middle the yellow light, and the bottom the green light. Depending on the abtract syntax attributes, each light is either grey or its proper color. The definition of the mapper for the red circle looks like this:</p>
<img alt="_images/complex_mapper_example.png" src="_images/complex_mapper_example.png" />
<p>No parser is defined, as it is not possible to change the style of the concrete syntax element without changing the abstract syntax.</p>
</div>
</div>
<div class="section" id="compiling">
<h2>Compiling<a class="headerlink" href="#compiling" title="Permalink to this headline">¶</a></h2>
<p>Both the abstract syntax definition and the concrete syntax definition need to be compiled before they can be used as a language. To do this, we use the compilation toolbar:</p>
<img alt="_images/compilation_toolbar.png" src="_images/compilation_toolbar.png" />
<p>To compile your abstract syntax, make sure the current active model is the abstract syntax definition of your language, and press the second button. This will display a file browser. Browse to the location of your language and choose the <em>&lt;formalism-name&gt;.metamodel</em> file as a target. For the <em>TrafficLights</em> example:</p>
<img alt="_images/compile_as.png" src="_images/compile_as.png" />
<p>To compile your concrete syntax, make sure the current active model is the concrete syntax definition of your language, and press the first button. This will display a file browser. Browse to the location of your language and choose the <em>&lt;formalism-name&gt;.defaultIcons.metamodel</em> file as a target. For the <em>TrafficLights</em> example:</p>
<img alt="_images/compile_cs.png" src="_images/compile_cs.png" />
<p>Each time you make a change to your abstract or concrete syntax, recompile them before using them.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Creating a Modelling Language</a><ul>
<li><a class="reference internal" href="#initializing">Initializing</a></li>
<li><a class="reference internal" href="#defining-abstract-syntax">Defining Abstract Syntax</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#classes">Classes</a></li>
<li><a class="reference internal" href="#associations">Associations</a></li>
<li><a class="reference internal" href="#cardinalities">Cardinalities</a></li>
<li><a class="reference internal" href="#attributes">Attributes</a></li>
<li><a class="reference internal" href="#inheritance">Inheritance</a></li>
<li><a class="reference internal" href="#constraints">Constraints</a></li>
<li><a class="reference internal" href="#actions">Actions</a></li>
<li><a class="reference internal" href="#triggers">Triggers</a></li>
<li><a class="reference internal" href="#action-library">Action Library</a></li>
</ul>
</li>
<li><a class="reference internal" href="#defining-concrete-syntax">Defining Concrete Syntax</a><ul>
<li><a class="reference internal" href="#mappers-and-parsers">Mappers and Parsers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#compiling">Compiling</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="overview.html"
                        title="previous chapter">Overview</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="using_language.html"
                        title="next chapter">Using a Modelling Language</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/new_language.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="using_language.html" title="Using a Modelling Language"
             >next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Overview"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">AToMPM 0.6 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Eugene Syriani, Hans Vangheluwe, Raphael Mannadiar, Conner Hansen, Simon Van Mierlo, Huseyin Ergin, Jonathan Corley.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.5.
    </div>
  </body>
</html>